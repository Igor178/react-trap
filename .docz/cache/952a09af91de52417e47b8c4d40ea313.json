{"remainingRequest":"C:\\Users\\sagiv\\github clones\\react-trap\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js?{\"presets\":[[\"@babel/preset-env\",{\"modules\":false}],\"@babel/preset-react\",[\"C:\\\\Users\\\\sagiv\\\\github clones\\\\react-trap\\\\node_modules\\\\babel-preset-docz\\\\dist\\\\index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-proposal-class-properties\",[\"C:\\\\Users\\\\sagiv\\\\github clones\\\\react-trap\\\\node_modules\\\\docz-utils\\\\lib\\\\named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"C:\\\\Users\\\\sagiv\\\\github clones\\\\react-trap\\\\node_modules\\\\react-hot-loader\\\\babel.js\"],\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!C:\\Users\\sagiv\\github clones\\react-trap\\src\\components\\Trap\\useTrap.js","dependencies":[{"path":"C:\\Users\\sagiv\\github clones\\react-trap\\src\\components\\Trap\\useTrap.js","mtime":1549619755812},{"path":"C:\\Users\\sagiv\\github clones\\react-trap\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sagiv\\github clones\\react-trap\\node_modules\\docz-core\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useRef, useState, useEffect } from \"react\";\nimport invariant from \"invariant\";\nimport { asArray } from \"../../helpers\";\nimport PropTypesDisplay from \"../PropTypesDisplay\";\n\nvar useTrap = function useTrap(_ref) {\n  var event = _ref.event,\n      on = _ref.on,\n      off = _ref.off,\n      preventDefault = _ref.preventDefault;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      trapped = _useState2[0],\n      setTrapped = _useState2[1];\n\n  var ref = useRef(null);\n\n  var setRef = function setRef(node) {\n    return ref.current = node;\n  };\n\n  useEffect(function () {\n    invariant(!!ref.current, \"A ref is required, did you forgot to use it?\");\n  });\n  useEffect(function () {\n    if (on && off) {\n      // we got seperate events for focus and blur\n      asArray(on).forEach(function (evt) {\n        document.addEventListener(evt, handleFocusEvent, {\n          detail: {\n            reactTrap: true\n          }\n        });\n      });\n      asArray(off).forEach(function (evt) {\n        document.addEventListener(evt, handleBlurEvent, {\n          detail: {\n            reactTrap: true\n          }\n        });\n      });\n    } else {\n      // signle event to rule them all!\n      asArray(event).forEach(function (evt) {\n        document.addEventListener(evt, handleEvent, {\n          detail: {\n            reactTrap: true\n          }\n        });\n      });\n    }\n\n    return function () {\n      // cleanup\n      if (on && off) {\n        asArray(on).forEach(function (evt) {\n          document.removeEventListener(evt, handleFocusEvent);\n        });\n        asArray(off).forEach(function (evt) {\n          document.removeEventListener(evt, handleBlurEvent);\n        });\n      } else {\n        asArray(event).forEach(function (evt) {\n          document.removeEventListener(evt, handleEvent);\n        });\n      }\n    };\n  }, // re-run on ref event, on, off, preventDefault changes\n  [event, on, off, preventDefault, trapped]);\n\n  var preventDefaultHelper = function preventDefaultHelper(e, nextTrapped) {\n    if (trapped !== nextTrapped && preventDefault) {\n      e.preventDefault();\n    }\n  };\n\n  var handleEvent = function handleEvent(e) {\n    var trapped = ref.current.contains(e.target);\n    preventDefaultHelper(e, trapped);\n    setTrapped(trapped);\n  };\n\n  var handleFocusEvent = function handleFocusEvent(e) {\n    var trapped = ref.current.contains(e.target);\n    preventDefaultHelper(e, trapped);\n\n    if (trapped) {\n      setTrapped(true);\n    }\n  };\n\n  var handleBlurEvent = function handleBlurEvent(e) {\n    var trapped = ref.current.contains(e.target);\n    preventDefaultHelper(e, trapped);\n\n    if (!trapped) {\n      setTrapped(false);\n    }\n  };\n\n  return [trapped, setRef];\n};\n\nvar _PropTypesDisplay$pro = PropTypesDisplay.propTypes,\n    children = _PropTypesDisplay$pro.children,\n    restOfPropTypes = _objectWithoutProperties(_PropTypesDisplay$pro, [\"children\"]);\n\nuseTrap.propTypes = restOfPropTypes;\nuseTrap.defaultProps = PropTypesDisplay.defaultProps;\nvar _default = useTrap;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(useTrap, \"useTrap\", \"C:\\\\Users\\\\sagiv\\\\github clones\\\\react-trap\\\\src\\\\components\\\\Trap\\\\useTrap.js\");\n  reactHotLoader.register(children, \"children\", \"C:\\\\Users\\\\sagiv\\\\github clones\\\\react-trap\\\\src\\\\components\\\\Trap\\\\useTrap.js\");\n  reactHotLoader.register(restOfPropTypes, \"restOfPropTypes\", \"C:\\\\Users\\\\sagiv\\\\github clones\\\\react-trap\\\\src\\\\components\\\\Trap\\\\useTrap.js\");\n  reactHotLoader.register(_default, \"default\", \"C:\\\\Users\\\\sagiv\\\\github clones\\\\react-trap\\\\src\\\\components\\\\Trap\\\\useTrap.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();",{"version":3,"sources":["C:\\Users\\sagiv\\github clones\\react-trap\\src\\components\\Trap\\useTrap.js"],"names":["useRef","useState","useEffect","invariant","asArray","PropTypesDisplay","useTrap","event","on","off","preventDefault","trapped","setTrapped","ref","setRef","node","current","forEach","evt","document","addEventListener","handleFocusEvent","detail","reactTrap","handleBlurEvent","handleEvent","removeEventListener","preventDefaultHelper","e","nextTrapped","contains","target","propTypes","children","restOfPropTypes","defaultProps"],"mappings":"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","sourcesContent":["import { useRef, useState, useEffect } from \"react\";\r\nimport invariant from \"invariant\";\r\nimport { asArray } from \"../../helpers\";\r\nimport PropTypesDisplay from \"../PropTypesDisplay\";\r\n\r\nconst useTrap = ({ event, on, off, preventDefault }) => {\r\n  const [trapped, setTrapped] = useState(false);\r\n  const ref = useRef(null);\r\n  const setRef = node => (ref.current = node);\r\n\r\n  useEffect(() => {\r\n    invariant(!!ref.current, \"A ref is required, did you forgot to use it?\");\r\n  });\r\n\r\n  useEffect(\r\n    () => {\r\n      if (on && off) {\r\n        // we got seperate events for focus and blur\r\n        asArray(on).forEach(evt => {\r\n          document.addEventListener(evt, handleFocusEvent, {\r\n            detail: { reactTrap: true }\r\n          });\r\n        });\r\n        asArray(off).forEach(evt => {\r\n          document.addEventListener(evt, handleBlurEvent, {\r\n            detail: { reactTrap: true }\r\n          });\r\n        });\r\n      } else {\r\n        // signle event to rule them all!\r\n        asArray(event).forEach(evt => {\r\n          document.addEventListener(evt, handleEvent, {\r\n            detail: { reactTrap: true }\r\n          });\r\n        });\r\n      }\r\n\r\n      return () => {\r\n        // cleanup\r\n        if (on && off) {\r\n          asArray(on).forEach(evt => {\r\n            document.removeEventListener(evt, handleFocusEvent);\r\n          });\r\n          asArray(off).forEach(evt => {\r\n            document.removeEventListener(evt, handleBlurEvent);\r\n          });\r\n        } else {\r\n          asArray(event).forEach(evt => {\r\n            document.removeEventListener(evt, handleEvent);\r\n          });\r\n        }\r\n      };\r\n    },\r\n    // re-run on ref event, on, off, preventDefault changes\r\n    [event, on, off, preventDefault, trapped]\r\n  );\r\n\r\n  const preventDefaultHelper = (e, nextTrapped) => {\r\n    if (trapped !== nextTrapped && preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  const handleEvent = e => {\r\n    const trapped = ref.current.contains(e.target);\r\n    preventDefaultHelper(e, trapped);\r\n    setTrapped(trapped);\r\n  };\r\n\r\n  const handleFocusEvent = e => {\r\n    const trapped = ref.current.contains(e.target);\r\n    preventDefaultHelper(e, trapped);\r\n    if (trapped) {\r\n      setTrapped(true);\r\n    }\r\n  };\r\n\r\n  const handleBlurEvent = e => {\r\n    const trapped = ref.current.contains(e.target);\r\n    preventDefaultHelper(e, trapped);\r\n    if (!trapped) {\r\n      setTrapped(false);\r\n    }\r\n  };\r\n\r\n  return [trapped, setRef];\r\n};\r\n\r\nconst { children, ...restOfPropTypes } = PropTypesDisplay.propTypes;\r\n\r\nuseTrap.propTypes = restOfPropTypes;\r\nuseTrap.defaultProps = PropTypesDisplay.defaultProps;\r\n\r\nexport default useTrap;\r\n"]}]}